<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/resources/scaffold/pageTemplateCliente.xhtml"
	xmlns:p="http://primefaces.org/ui">


	<ui:param name="pageTitle" value="Compra entradas"/>

	<ui:define name="header">
		<h1>Entrada</h1>
	</ui:define>

	<ui:define name="subheader">
		<h3>Añade un complemento</h3>
	</ui:define>

	<ui:define name="footer"/>

	<ui:define name="main">
		<h:form id="comprar">
				<div class="row">
				<p:repeat var="entrada"  value="#{ddTipoComplementoBean.listadoEntradas}" >
					
					  <div class="col-sm-6 col-md-6">
					    <div class="thumbnail">
					    <div class="section">
		        			<div class="container">
							      <div class="col-md-2 caption">
							        <h3>#{entrada.nombre}</h3>
							        <p>#{entrada.usuario.nombre}</p>
							        <p>Precio: #{entrada.precio}€</p>
							      </div>
							   
							       <div class="col-md-2 caption">
							       <p:repeat var="comple"  value="#{entrada.listaComplementos}" >
								       <h:outputLabel value="#{comple.complemento.nombre}" />
								       <h:outputLabel value="#{comple.complemento.precio}" />
								       <h:outputLabel value="#{comple.complemento.descripcion}" />
								       <p:spinner      value="#{comple.cantidad}" min="0" > 
								       	<p:ajax update="comprar:totales"></p:ajax>
								       </p:spinner>
							        </p:repeat>
							        </div>
							    </div>
							 </div>
					    </div>
					  </div>	
				</p:repeat>
				</div>
					<p:outputPanel id="totales" style="float:right;">
			        			<div class="col-md-12 ">
							<p:outputLabel  value="Total: " /> <p:outputLabel id="total" value="#{ddTipoComplementoBean.total}"></p:outputLabel>
								</div>
								<div class="col-md-12 ">
							<p:repeat var="entrada" value="#{ddTipoComplementoBean.listadoEntradas}" >
								<p:outputPanel rendered="#{!empty entrada.listaComplementos}">
								<p:outputLabel  value="#{entrada.usuario.nombre} " /> 
								<p:outputLabel  value=" va ha comprar:" /> 
								<p:repeat var="complemento" value="#{entrada.listaComplementos}"  >
									<p:outputPanel rendered="#{complemento.cantidad > 0}">
									<br></br>
									<p:outputLabel  value="Cantidad #{complemento.cantidad} de" /> <p:outputLabel  value=" #{complemento.complemento.nombre} " /> <p:outputLabel  value=" precio: #{complemento.complemento.precio}" /> 	 
									</p:outputPanel>
								</p:repeat>
								</p:outputPanel>
							</p:repeat>
							</div>
					</p:outputPanel>
					<br></br>
					<br></br>
					<p:separator />
					
					<p:outputPanel style="margin:auto; width:20%;">
						<p:commandLink styleClass="btn btn-primary" id="botonComprar"  action="#{ddTipoComplementoBean.cambiarPagina()}" value="Finalizar compra">
						</p:commandLink>
					</p:outputPanel>
		</h:form>		
	</ui:define>

</ui:composition>
